{"ast":null,"code":"import { empty } from \"rxjs\";\nimport { catchError } from \"rxjs/operators\";\nimport { AlertModalComponent } from \"../shared/alert-modal/alert-modal.component\";\nimport { FormControl } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./usuario.service\";\nimport * as i2 from \"ngx-bootstrap/modal\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\n\nconst _c0 = function (a0) {\n  return [a0];\n};\n\nfunction UsuarioComponent_table_22_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtext(1, \"\\n                    \");\n    i0.ɵɵelementStart(2, \"td\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \"\\n                    \");\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \"\\n                    \");\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9, \"\\n                        \");\n    i0.ɵɵelementStart(10, \"span\", 10);\n    i0.ɵɵtext(11, \"\\n\\n                            \");\n    i0.ɵɵelementStart(12, \"button\", 11);\n    i0.ɵɵtext(13, \"\\n                                Atualizar\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n                       \\n                            \");\n    i0.ɵɵelementStart(15, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function UsuarioComponent_table_22_tr_18_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const u_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.onDelete(u_r5);\n    });\n    i0.ɵɵtext(16, \"\\n                                Remover\\n                            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(17, \"\\n                        \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18, \"\\n                    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(19, \"\\n                \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const u_r5 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(u_r5.login);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(u_r5.funcionario.pessoa.nome);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"routerLink\", \"atualizar/\" + i0.ɵɵpureFunction1(3, _c0, u_r5.login));\n  }\n}\n\nfunction UsuarioComponent_table_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\", 8);\n    i0.ɵɵtext(1, \"\\n            \");\n    i0.ɵɵelementStart(2, \"thead\");\n    i0.ɵɵtext(3, \"\\n                \");\n    i0.ɵɵelementStart(4, \"tr\");\n    i0.ɵɵtext(5, \"\\n                    \");\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Login\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \"\\n                    \");\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Nome\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \"\\n                    \");\n    i0.ɵɵelement(12, \"th\");\n    i0.ɵɵtext(13, \"\\n                \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \"\\n            \");\n    i0.ɵɵelementStart(16, \"tbody\");\n    i0.ɵɵtext(17, \"\\n                \");\n    i0.ɵɵtemplate(18, UsuarioComponent_table_22_tr_18_Template, 20, 5, \"tr\", 9);\n    i0.ɵɵtext(19, \"\\n            \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(20, \"\\n        \");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const usuario_r3 = ctx.ngIf;\n    i0.ɵɵadvance(18);\n    i0.ɵɵproperty(\"ngForOf\", usuario_r3);\n  }\n}\n\nfunction UsuarioComponent_ng_template_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"\\n    \");\n    i0.ɵɵelementStart(1, \"div\", 13);\n    i0.ɵɵtext(2, \"\\n        \");\n    i0.ɵɵelementStart(3, \"span\", 14);\n    i0.ɵɵtext(4, \"Loading...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(5, \"\\n    \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6, \"\\n\");\n  }\n}\n\nexport class UsuarioComponent {\n  constructor(service, modalService) {\n    this.service = service;\n    this.modalService = modalService;\n    this.queryField = new FormControl();\n  }\n\n  ngOnInit() {\n    this.onRefresh();\n    this.queryField.valueChanges.pipe(map(value => value.trim()), debounceTime(300), distinctUntilChanged(), tap(value => this.consulta(value))).subscribe();\n  }\n\n  consulta(value) {\n    if (value.length > 0) {\n      this.usuarios$ = this.service.busca(value).pipe(catchError(error => {\n        this.handleError(\"Erro ao carregar\");\n        return empty();\n      }));\n    } else {\n      this.onRefresh();\n    }\n  }\n\n  onRefresh() {\n    this.usuarios$ = this.service.list().pipe(catchError(error => {\n      this.handleError(\"Erro ao carregar\");\n      return empty();\n    }));\n  }\n\n  onDelete(u) {\n    this.service.deleteUsuario(u).subscribe(success => {\n      this.handleError(\"Usuario Deletado\");\n      this.ngOnInit();\n    }, erro => {\n      this.handleError(\"Erro ao Deletar\");\n    });\n  }\n\n  handleError(erro) {\n    this.bsModalRef = this.modalService.show(AlertModalComponent);\n    this.bsModalRef.content.type = \"danger\";\n    this.bsModalRef.content.message = erro;\n  }\n\n}\n\nUsuarioComponent.ɵfac = function UsuarioComponent_Factory(t) {\n  return new (t || UsuarioComponent)(i0.ɵɵdirectiveInject(i1.UsuarioService), i0.ɵɵdirectiveInject(i2.BsModalService));\n};\n\nUsuarioComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: UsuarioComponent,\n  selectors: [[\"app-usuario\"]],\n  decls: 29,\n  vars: 5,\n  consts: [[1, \"container\"], [1, \"navbar\", \"navbar-light\", \"bg-light\"], [1, \"form-inline\"], [\"type\", \"search\", \"placeholder\", \"Busca Login\", \"aria-label\", \"Search\", 1, \"form-control\", \"mr-sm-2\"], [1, \"btn\", \"btn-outline-success\", \"my-2\", \"my-sm-0\"], [1, \"btn\", \"btn-outline-success\", \"my-2\", \"my-sm-0\", 3, \"routerLink\"], [\"class\", \"table table-hover\", 4, \"ngIf\", \"ngIfElse\"], [\"loading\", \"\"], [1, \"table\", \"table-hover\"], [4, \"ngFor\", \"ngForOf\"], [1, \"float-end\"], [1, \"btn\", \"btn-outline-warning\", \"mb-1\", \"btn-sm\", 3, \"routerLink\"], [1, \"btn\", \"btn-outline-danger\", \"mb-1\", \"btn-sm\", 3, \"click\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"sr-only\"]],\n  template: function UsuarioComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtext(1, \"\\n    \");\n      i0.ɵɵelementStart(2, \"legend\");\n      i0.ɵɵtext(3, \"Usuarios\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(4, \"br\");\n      i0.ɵɵtext(5, \"\\n    \");\n      i0.ɵɵelementStart(6, \"nav\", 1);\n      i0.ɵɵtext(7, \"\\n        \");\n      i0.ɵɵelementStart(8, \"div\", 2);\n      i0.ɵɵtext(9, \"\\n            \");\n      i0.ɵɵelement(10, \"input\", 3);\n      i0.ɵɵtext(11, \"\\n\\n            \");\n      i0.ɵɵelementStart(12, \"button\", 4);\n      i0.ɵɵtext(13, \"Procurar\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(14, \"\\n            \");\n      i0.ɵɵelementStart(15, \"button\", 5);\n      i0.ɵɵtext(16, \"Novo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(17, \"\\n        \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(18, \"\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(19, \"\\n\\n    \");\n      i0.ɵɵelementStart(20, \"div\", 0);\n      i0.ɵɵtext(21, \"\\n\\n        \");\n      i0.ɵɵtemplate(22, UsuarioComponent_table_22_Template, 21, 1, \"table\", 6);\n      i0.ɵɵpipe(23, \"async\");\n      i0.ɵɵtext(24, \"\\n\\n    \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(25, \"\\n\\n\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(26, \"\\n\\n\");\n      i0.ɵɵtemplate(27, UsuarioComponent_ng_template_27_Template, 7, 0, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n    }\n\n    if (rf & 2) {\n      const _r1 = i0.ɵɵreference(28);\n\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"routerLink\", \"novo\");\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(23, 3, ctx.usuarios$))(\"ngIfElse\", _r1);\n    }\n  },\n  directives: [i3.RouterLink, i4.NgIf, i4.NgForOf],\n  pipes: [i4.AsyncPipe],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ1c3VhcmlvLmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"sources":["/home/adriano/Documentos/Fatec/Tcc/tcc/src/app/usuario/usuario.component.ts","/home/adriano/Documentos/Fatec/Tcc/tcc/src/app/usuario/usuario.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Observable, empty } from \"rxjs\";\nimport { Component, OnInit } from \"@angular/core\";\nimport { Usuario } from \"../model/usuario\";\nimport { UsuarioService } from \"./usuario.service\";\nimport { take, catchError } from \"rxjs/operators\";\nimport { AlertModalComponent } from \"../shared/alert-modal/alert-modal.component\";\nimport { BsModalService, BsModalRef } from \"ngx-bootstrap/modal\";\nimport { FormControl } from \"@angular/forms\";\n\n@Component({\n  selector: \"app-usuario\",\n  templateUrl: \"./usuario.component.html\",\n  styleUrls: [\"./usuario.component.css\"],\n  preserveWhitespaces: true, // usa o espaço no html\n})\nexport class UsuarioComponent implements OnInit {\n  usuarios$!: Observable<Usuario[]>;\n  bsModalRef!: BsModalRef;\n\n  queryField = new FormControl();\n\n  constructor(\n    private service: UsuarioService,\n    private modalService: BsModalService\n  ) {}\n\n  ngOnInit(): void {\n    this.onRefresh();\n\n    this.queryField.valueChanges\n      .pipe(\n        map((value) => value.trim()),\n        debounceTime(300),\n        distinctUntilChanged(),\n        tap((value) => this.consulta(value))\n      )\n      .subscribe();\n  }\n\n  consulta(value: string) {\n    if (value.length > 0) {\n      this.usuarios$ = this.service.busca(value).pipe(\n        catchError((error) => {\n          this.handleError(\"Erro ao carregar\");\n          return empty();\n        })\n      );\n    } else {\n      this.onRefresh();\n    }\n  }\n\n  onRefresh() {\n    this.usuarios$ = this.service.list().pipe(\n      catchError((error) => {\n        this.handleError(\"Erro ao carregar\");\n        return empty();\n      })\n    );\n  }\n\n  onDelete(u: Usuario) {\n    this.service.deleteUsuario(u).subscribe(\n      (success) => {\n        this.handleError(\"Usuario Deletado\");\n        this.ngOnInit();\n      },\n      (erro) => {\n        this.handleError(\"Erro ao Deletar\");\n      }\n    );\n  }\n\n  handleError(erro: string) {\n    this.bsModalRef = this.modalService.show(AlertModalComponent);\n    this.bsModalRef.content.type = \"danger\";\n    this.bsModalRef.content.message = erro;\n  }\n}\n","<div class=\"container\">\n    <legend>Usuarios</legend><br>\n    <nav class=\"navbar navbar-light bg-light\">\n        <div class=\"form-inline\">\n            <input class=\"form-control mr-sm-2\" type=\"search\" placeholder=\"Busca Login\" aria-label=\"Search\">\n\n            <button class=\"btn btn-outline-success my-2 my-sm-0\">Procurar</button>\n            <button class=\"btn btn-outline-success my-2 my-sm-0\" [routerLink]=\"'novo'\">Novo</button>\n        </div>\n    </nav>\n\n    <div class=\"container\">\n\n        <table class=\"table table-hover\" *ngIf=\"(usuarios$ | async) as usuario; else loading\">\n            <thead>\n                <tr>\n                    <th>Login</th>\n                    <th>Nome</th>\n                    <th></th>\n                </tr>\n            </thead>\n            <tbody>\n                <tr *ngFor=\"let u of usuario\">\n                    <td>{{ u.login }}</td>\n                    <td>{{ u.funcionario.pessoa.nome }}</td>\n                    <td>\n                        <span class=\"float-end\">\n\n                            <button class=\"btn btn-outline-warning mb-1 btn-sm\" [routerLink]=\"'atualizar/' + [u.login]\">\n                                Atualizar\n                            </button>\n                       \n                            <button class=\"btn btn-outline-danger mb-1 btn-sm\" (click)=\"onDelete(u)\">\n                                Remover\n                            </button>\n                        </span>\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n\n    </div>\n\n</div>\n\n<ng-template #loading>\n    <div class=\"spinner-border\" role=\"status\">\n        <span class=\"sr-only\">Loading...</span>\n    </div>\n</ng-template>"],"sourceRoot":""},"metadata":{},"sourceType":"module"}