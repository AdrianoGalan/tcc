{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport { Maquina } from 'src/app/model/maquina';\nimport { SetorComponent } from 'src/app/setor/setor.component';\nimport { FabricanteComponent } from 'src/app/fabricante/fabricante.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"./../maquina.service\";\nimport * as i4 from \"./../../setor/setor.service\";\nimport * as i5 from \"src/app/fabricante/fabricante.service\";\nimport * as i6 from \"ngx-bootstrap/modal\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"ngx-bootstrap/tooltip\";\n\nfunction MaquinaCadastroComponent_option_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const f_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", f_r4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", f_r4.id, \" - \", f_r4.pessoa.nome, \" \");\n  }\n}\n\nfunction MaquinaCadastroComponent_option_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const s_r5 = ctx.$implicit;\n    i0.ɵɵproperty(\"ngValue\", s_r5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", s_r5.id, \" - \", s_r5.nome, \" \");\n  }\n}\n\nfunction MaquinaCadastroComponent_ng_template_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵelementStart(1, \"span\", 21);\n    i0.ɵɵtext(2, \"Loading...\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function (a0) {\n  return {\n    \"is-invalid\": a0\n  };\n};\n\nexport let MaquinaCadastroComponent = /*@__PURE__*/(() => {\n  class MaquinaCadastroComponent {\n    constructor(formBuilder, route, router, maquinaService, setorService, fabricanteService, modalService) {\n      this.formBuilder = formBuilder;\n      this.route = route;\n      this.router = router;\n      this.maquinaService = maquinaService;\n      this.setorService = setorService;\n      this.fabricanteService = fabricanteService;\n      this.modalService = modalService;\n      this.submitted = false;\n      this.novo = false;\n      this.inscricao = this.route.params.subscribe(params => {\n        let sigla = params['sigla'];\n\n        if (sigla == null) {\n          this.novo = true;\n          this.maquina = new Maquina();\n        } else {\n          this.maquinaService.getMaquina(sigla).subscribe(m => {\n            this.maquina = m;\n\n            if (m) {\n              this.povoar();\n            }\n          });\n        }\n      });\n    }\n\n    ngOnInit() {\n      this.formulario = this.formBuilder.group({\n        sigla: [null, [Validators.required, Validators.minLength(3), Validators.maxLength(3)]],\n        dataCompra: [null, Validators.required],\n        fabricante: [null, Validators.required],\n        setor: [null, Validators.required]\n      });\n      this.onRefresh();\n    }\n\n    onRefresh() {\n      this.setor$ = this.setorService.list().pipe();\n      this.fabricante$ = this.fabricanteService.list().pipe();\n    }\n\n    povoar() {\n      var _a, _b, _c, _d;\n\n      this.onRefresh();\n      (_a = this.formulario.get('sigla')) === null || _a === void 0 ? void 0 : _a.setValue(this.maquina.sigla);\n      (_b = this.formulario.get('dataCompra')) === null || _b === void 0 ? void 0 : _b.setValue(this.maquina.dataCompra);\n      (_c = this.formulario.get('fabricante')) === null || _c === void 0 ? void 0 : _c.setValue(this.maquina.fabricante);\n      (_d = this.formulario.get('setor')) === null || _d === void 0 ? void 0 : _d.setValue(this.maquina.setor);\n    }\n\n    onSubmit() {\n      this.submitted = true;\n\n      if (this.formulario.valid) {\n        this.maquina.sigla = this.formulario.value['sigla'];\n        this.maquina.dataCompra = this.formulario.value['dataCompra'];\n        this.maquina.setor = this.formulario.value['setor'];\n        this.maquina.fabricante = this.formulario.value['fabricante'];\n        this.maquina.status = 'A';\n        this.maquinaService.salvarMaquina(this.maquina).subscribe(success => {\n          this.formulario.reset();\n          this.router.navigate([\"/maquina\"]);\n        }, erro => {\n          console.log(erro);\n        });\n      }\n    }\n\n    addSetor() {\n      this.bsModalRef = this.modalService.show(SetorComponent);\n    }\n\n    comparar(obj1, obj2) {\n      return obj1 && obj2 ? obj1.id === obj2.id : obj1 === obj2;\n    }\n\n    addFabricante() {\n      this.bsModalRef = this.modalService.show(FabricanteComponent);\n    }\n\n    hasError(field) {\n      var _a;\n\n      return (_a = this.formulario.get(field)) === null || _a === void 0 ? void 0 : _a.errors;\n    }\n\n  }\n\n  MaquinaCadastroComponent.ɵfac = function MaquinaCadastroComponent_Factory(t) {\n    return new (t || MaquinaCadastroComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MaquinaService), i0.ɵɵdirectiveInject(i4.SetorService), i0.ɵɵdirectiveInject(i5.FabricanteService), i0.ɵɵdirectiveInject(i6.BsModalService));\n  };\n\n  MaquinaCadastroComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: MaquinaCadastroComponent,\n    selectors: [[\"app-maquina-cadastro\"]],\n    decls: 46,\n    vars: 21,\n    consts: [[3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\", \"row\"], [\"for\", \"sigla\", 1, \"col-sm-3\", \"col-form-label\"], [1, \"col-sm-9\"], [\"type\", \"text\", \"autocomplete\", \"off\", \"placeholder\", \"Digite uma Sigla\", \"formControlName\", \"sigla\", \"id\", \"siglaNova\", 1, \"form-control\", 3, \"ngClass\"], [1, \"invalid-feedback\"], [\"for\", \"dataCompra\", 1, \"col-sm-3\", \"col-form-label\"], [\"type\", \"date\", \"autocomplete\", \"off\", \"formControlName\", \"dataCompra\", \"id\", \"dataCompra\", 1, \"form-control\", 3, \"ngClass\"], [\"for\", \"fabricante\", 1, \"col-sm-3\", \"col-form-label\"], [1, \"col-sm-8\"], [\"id\", \"fabricante\", \"formControlName\", \"fabricante\", 1, \"form-control\", 2, \"margin\", \"5px\", 3, \"compareWith\", \"ngClass\"], [3, \"ngValue\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-sm-1\"], [\"tooltip\", \"adicionar novo Fabricante\", 1, \"bi\", \"bi-plus-circle-fill\", 2, \"font-size\", \"2rem\", \"color\", \"rgb(30, 126, 11)\", 3, \"click\"], [\"for\", \"setor\", 1, \"col-sm-3\", \"col-form-label\"], [\"id\", \"setor\", \"formControlName\", \"setor\", 1, \"form-control\", 2, \"margin\", \"5px\", 3, \"compareWith\", \"ngClass\"], [\"tooltip\", \"adicionar novo setor\", 1, \"bi\", \"bi-plus-circle-fill\", 2, \"font-size\", \"2rem\", \"color\", \"rgb(30, 126, 11)\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [\"novoFabricante\", \"\"], [3, \"ngValue\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"sr-only\"]],\n    template: function MaquinaCadastroComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"form\", 0);\n        i0.ɵɵlistener(\"ngSubmit\", function MaquinaCadastroComponent_Template_form_ngSubmit_0_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(1, \"legend\");\n        i0.ɵɵtext(2, \"Cadastro Maquina\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(3, \"br\");\n        i0.ɵɵelementStart(4, \"div\", 1);\n        i0.ɵɵelementStart(5, \"label\", 2);\n        i0.ɵɵtext(6, \"Sigla:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 3);\n        i0.ɵɵelement(8, \"input\", 4);\n        i0.ɵɵelementStart(9, \"div\", 5);\n        i0.ɵɵtext(10, \"Digite a sigla\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 1);\n        i0.ɵɵelementStart(12, \"label\", 6);\n        i0.ɵɵtext(13, \"Data Compra:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 3);\n        i0.ɵɵelement(15, \"input\", 7);\n        i0.ɵɵelementStart(16, \"div\", 5);\n        i0.ɵɵtext(17, \"Digite a Data da compra\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"div\", 1);\n        i0.ɵɵelementStart(19, \"label\", 8);\n        i0.ɵɵtext(20, \"Fabricante:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 9);\n        i0.ɵɵelementStart(22, \"select\", 10);\n        i0.ɵɵtemplate(23, MaquinaCadastroComponent_option_23_Template, 2, 3, \"option\", 11);\n        i0.ɵɵpipe(24, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 5);\n        i0.ɵɵtext(26, \"Selecione um Fabricante\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 12);\n        i0.ɵɵelementStart(28, \"i\", 13);\n        i0.ɵɵlistener(\"click\", function MaquinaCadastroComponent_Template_i_click_28_listener() {\n          return ctx.addFabricante();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"div\", 1);\n        i0.ɵɵelementStart(30, \"label\", 14);\n        i0.ɵɵtext(31, \"Setor:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 9);\n        i0.ɵɵelementStart(33, \"select\", 15);\n        i0.ɵɵtemplate(34, MaquinaCadastroComponent_option_34_Template, 2, 3, \"option\", 11);\n        i0.ɵɵpipe(35, \"async\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 5);\n        i0.ɵɵtext(37, \"Selecione um Setor\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"div\", 12);\n        i0.ɵɵelementStart(39, \"i\", 16);\n        i0.ɵɵlistener(\"click\", function MaquinaCadastroComponent_Template_i_click_39_listener() {\n          return ctx.addSetor();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(40, \"div\", 1);\n        i0.ɵɵelementStart(41, \"div\", 3);\n        i0.ɵɵelementStart(42, \"button\", 17);\n        i0.ɵɵtext(43, \"Salvar\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(44, MaquinaCadastroComponent_ng_template_44_Template, 3, 0, \"ng-template\", null, 18, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"formGroup\", ctx.formulario);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(13, _c0, ctx.submitted && ctx.hasError(\"sigla\")));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(15, _c0, ctx.submitted && ctx.hasError(\"dataCompra\")));\n        i0.ɵɵadvance(7);\n        i0.ɵɵproperty(\"compareWith\", ctx.comparar)(\"ngClass\", i0.ɵɵpureFunction1(17, _c0, ctx.submitted && ctx.hasError(\"fabricante\")));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(24, 9, ctx.fabricante$));\n        i0.ɵɵadvance(10);\n        i0.ɵɵproperty(\"compareWith\", ctx.comparar)(\"ngClass\", i0.ɵɵpureFunction1(19, _c0, ctx.submitted && ctx.hasError(\"setor\")));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(35, 11, ctx.setor$));\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlName, i7.NgClass, i1.SelectControlValueAccessor, i7.NgForOf, i8.TooltipDirective, i1.NgSelectOption, i1.ɵNgSelectMultipleOption],\n    pipes: [i7.AsyncPipe],\n    styles: [\"\"]\n  });\n  return MaquinaCadastroComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}