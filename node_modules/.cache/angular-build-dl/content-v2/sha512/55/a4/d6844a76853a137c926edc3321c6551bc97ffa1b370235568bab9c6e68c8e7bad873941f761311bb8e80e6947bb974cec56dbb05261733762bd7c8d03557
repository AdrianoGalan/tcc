(self.webpackChunktcc=self.webpackChunktcc||[]).push([[539],{4539:function(n,o,i){"use strict";i.r(o),i.d(o,{FuncionarioModule:function(){return J}});var t=i(1462),r=i(1116),a=i(2623);class u{}var e=i(7368),s=i(1279),c=i(5522);function l(n,o){1&n&&(e.TgZ(0,"div",5),e.TgZ(1,"label",17),e._uU(2,"Matricula:"),e.qZA(),e.TgZ(3,"div",18),e._UZ(4,"input",19),e.qZA(),e.qZA())}function f(n,o){if(1&n&&(e.TgZ(0,"option",20),e._uU(1),e.qZA()),2&n){const n=o.$implicit;e.Q6J("ngValue",n),e.xp6(1),e.Oqu(n.funcao)}}function m(n,o){if(1&n){const n=e.EpF();e.TgZ(0,"form",3),e.NdJ("ngSubmit",function(){return e.CHM(n),e.oxw().onSubmit()}),e.TgZ(1,"legend"),e._uU(2,"Cadastro do funcionario"),e.qZA(),e.YNc(3,l,5,0,"div",4),e.TgZ(4,"div",5),e.TgZ(5,"label",6),e._uU(6,"Nome:"),e.qZA(),e.TgZ(7,"div",7),e._UZ(8,"input",8),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e.TgZ(10,"label",6),e._uU(11,"Data Adm:"),e.qZA(),e.TgZ(12,"div",7),e._UZ(13,"input",9),e.qZA(),e.qZA(),e.TgZ(14,"div",5),e.TgZ(15,"label",10),e._uU(16,"Fun\xe7\xe3o:"),e.qZA(),e.TgZ(17,"div",7),e.TgZ(18,"select",11),e.YNc(19,f,2,2,"option",12),e.qZA(),e.qZA(),e.qZA(),e.TgZ(20,"div",5),e.TgZ(21,"label",13),e._uU(22,"Manutentor:"),e.qZA(),e.TgZ(23,"div",14),e._UZ(24,"input",15),e.qZA(),e.qZA(),e.TgZ(25,"button",16),e._uU(26,"Salvar"),e.qZA(),e.qZA()}if(2&n){const n=o.ngIf,i=e.oxw();e.Q6J("formGroup",i.formulario),e.xp6(3),e.Q6J("ngIf",!i.novo),e.xp6(15),e.Q6J("compareWith",i.comparar),e.xp6(1),e.Q6J("ngForOf",n)}}function h(n,o){1&n&&(e.TgZ(0,"div",21),e.TgZ(1,"span",22),e._uU(2,"Loading..."),e.qZA(),e.qZA())}let d=(()=>{class n{constructor(n,o,i,t){this.formBuilder=n,this.route=o,this.router=i,this.funcionarioService=t,this.novo=!1,this.inscricao=this.route.params.subscribe(n=>{let o=n.id;null==o?this.novo=!0:this.funcionarioService.getFuncionario(o).subscribe(n=>{this.funcionario=n,n&&this.povoar()})})}ngOnInit(){this.funcao$=this.funcionarioService.listFuncao().pipe(),this.formulario=this.formBuilder.group({matricula:[null],nome:[null,[t.kI.required,t.kI.minLength(3)]],funcao:[null,t.kI.required],dataAdm:[null,t.kI.required],manutentor:[null,t.kI.required]})}povoar(){var n,o,i,t,r;null===(n=this.formulario.get("matricula"))||void 0===n||n.setValue(this.funcionario.matricula),null===(o=this.formulario.get("nome"))||void 0===o||o.setValue(this.funcionario.pessoa.nome),null===(i=this.formulario.get("funcao"))||void 0===i||i.setValue(this.funcionario.funcao),null===(t=this.formulario.get("dataAdm"))||void 0===t||t.setValue(this.funcionario.dataAdm),"Sim"==this.funcionario.manutentor&&(null===(r=this.formulario.get("manutentor"))||void 0===r||r.setValue(!0))}onSubmit(){if(this.formulario.valid)if(this.novo){this.funcionario=new u;let n=new a.Z;this.funcionario.pessoa=n,this.funcionario.pessoa.nome=this.formulario.value.nome,this.funcionario.funcao=this.formulario.value.funcao,this.funcionario.dataAdm=this.formulario.value.dataAdm,this.funcionario.status="A",this.funcionario.manutentor=this.formulario.value.manutentor?"Sim":"N\xe3o",this.funcionarioService.salvarFuncionario(this.funcionario).subscribe(n=>{this.formulario.reset(),this.router.navigate(["funcionario"])},n=>{})}else this.funcionario.pessoa.nome=this.formulario.value.nome,this.funcionario.funcao=this.formulario.value.funcao,this.funcionario.dataAdm=this.formulario.value.dataAdm,this.funcionario.manutentor=this.formulario.value.manutentor?"Sim":"Nao",this.funcionarioService.atualizarFuncionario(this.funcionario).subscribe(n=>{this.formulario.reset(),this.router.navigate(["funcionario"])},n=>{})}comparar(n,o){return n&&o?n.funcao===o.funcao:n===o}hasError(n){var o;return null===(o=this.formulario.get(n))||void 0===o?void 0:o.errors}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(t.qu),e.Y36(s.gz),e.Y36(s.F0),e.Y36(c.w))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-funcionario-cadastro"]],decls:5,vars:4,consts:[[1,"container",2,"padding-top","10px","width","60%"],[3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],["class","row md-6",4,"ngIf"],[1,"row","md-6"],["for","nome",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","text","formControlName","nome",1,"form-control",2,"margin","5px"],["type","date","formControlName","dataAdm",1,"form-control",2,"margin","5px"],["for","funcao",1,"col-sm-3","col-form-label"],["id","funcao","formControlName","funcao",1,"form-control",2,"margin","5px",3,"compareWith"],[3,"ngValue",4,"ngFor","ngForOf"],["for","manutentor",1,"col-sm-3","col-form-label"],[1,"col-sm-1"],["type","checkbox","formControlName","manutentor",1,"form-control",2,"margin","5px"],["type","submit",1,"btn","btn-primary"],["for","matricula",1,"col-sm-3","col-form-label"],[1,"col-sm-4"],["id","matricula","type","text","value","1234","formControlName","matricula","readonly","",1,"form-control-plaintext",2,"margin","5px"],[3,"ngValue"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e.YNc(1,m,27,4,"form",1),e.ALo(2,"async"),e.qZA(),e.YNc(3,h,3,0,"ng-template",null,2,e.W1O)),2&n){const n=e.MAs(4);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,o.funcao$))("ngIfElse",n)}},directives:[r.O5,t._Y,t.JL,t.sg,t.Fj,t.JJ,t.u,t.EJ,r.sg,t.Wl,t.YN,t.Kr],pipes:[r.Ov],styles:[""]}),n})();var g=i(653),Z=i(9996),p=i(7701),v=i(8720),U=i(6599),_=i(7727),b=i(3193),A=i(1483);const q=function(n){return[n]};function T(n,o){if(1&n){const n=e.EpF();e.TgZ(0,"tr"),e._uU(1,"\n        "),e.TgZ(2,"td"),e._uU(3),e.qZA(),e._uU(4,"\n        "),e.TgZ(5,"td"),e._uU(6),e.qZA(),e._uU(7,"\n        "),e.TgZ(8,"td"),e._uU(9),e.qZA(),e._uU(10,"\n        "),e.TgZ(11,"td"),e._uU(12),e.qZA(),e._uU(13,"\n        "),e.TgZ(14,"td"),e._uU(15),e.qZA(),e._uU(16,"\n        "),e.TgZ(17,"td"),e._uU(18,"\n          "),e.TgZ(19,"span",11),e._uU(20,"\n            "),e.TgZ(21,"button",12),e._uU(22,"\n              Atualizar\n            "),e.qZA(),e._uU(23,"\n\n            "),e.TgZ(24,"button",13),e.NdJ("click",function(){const o=e.CHM(n).$implicit;return e.oxw(2).onDelete(o)}),e._uU(25,"\n              Remover\n            "),e.qZA(),e._uU(26,"\n          "),e.qZA(),e._uU(27,"\n        "),e.qZA(),e._uU(28,"\n      "),e.qZA()}if(2&n){const n=o.$implicit;e.xp6(3),e.Oqu(n.matricula),e.xp6(3),e.Oqu(n.pessoa.nome),e.xp6(3),e.Oqu(n.funcao.funcao),e.xp6(3),e.Oqu(n.manutentor),e.xp6(3),e.Oqu(n.dataAdm),e.xp6(6),e.Q6J("routerLink","atualizar/"+e.VKq(6,q,n.matricula))}}function x(n,o){if(1&n&&(e.TgZ(0,"table",9),e._uU(1,"\n    "),e.TgZ(2,"thead"),e._uU(3,"\n      "),e.TgZ(4,"tr"),e._uU(5,"\n        "),e.TgZ(6,"th"),e._uU(7,"Matricula"),e.qZA(),e._uU(8,"\n        "),e.TgZ(9,"th"),e._uU(10,"Nome"),e.qZA(),e._uU(11,"\n        "),e.TgZ(12,"th"),e._uU(13,"Fun\xe7\xe3o"),e.qZA(),e._uU(14,"\n        "),e.TgZ(15,"th"),e._uU(16,"Manutentor"),e.qZA(),e._uU(17,"\n        "),e.TgZ(18,"th"),e._uU(19,"DataAdm"),e.qZA(),e._uU(20,"\n        "),e._UZ(21,"th"),e._uU(22,"\n      "),e.qZA(),e._uU(23,"\n    "),e.qZA(),e._uU(24,"\n    "),e.TgZ(25,"tbody"),e._uU(26,"\n      "),e.YNc(27,T,29,8,"tr",10),e._uU(28,"\n    "),e.qZA(),e._uU(29,"\n  "),e.qZA()),2&n){const n=o.ngIf;e.xp6(27),e.Q6J("ngForOf",n)}}function y(n,o){1&n&&(e._uU(0,"\n  "),e.TgZ(1,"div",14),e._uU(2,"\n    "),e.TgZ(3,"span",15),e._uU(4,"Loading..."),e.qZA(),e._uU(5,"\n  "),e.qZA(),e._uU(6,"\n"))}const F=[{path:"",component:(()=>{class n{constructor(n,o){this.funcionarioService=n,this.modalService=o,this.queryField=new t.NI}ngOnInit(){this.onRefresh(),this.queryField.valueChanges.pipe((0,Z.U)(n=>n.trim()),(0,p.b)(300),(0,v.x)(),(0,U.b)(n=>this.consulta(n))).subscribe()}consulta(n){n.length>0?this.funcionarios$=this.funcionarioService.busca(n).pipe((0,_.K)(n=>(this.handleError("Erro ao carregar"),(0,g.c)()))):this.onRefresh()}onRefresh(){this.funcionarios$=this.funcionarioService.list().pipe((0,_.K)(n=>(this.handleError("Erro ao carregar"),(0,g.c)())))}onEdit(n){}onDelete(n){this.funcionarioService.delete(n).subscribe(n=>{this.handleError("Funcionario Deletado"),this.ngOnInit()},n=>{this.handleError("Erro ao Deletar")})}handleError(n){this.bsModalRef=this.modalService.show(b.F),this.bsModalRef.content.type="danger",this.bsModalRef.content.message=n}buscar(){var n;(null===(n=this.queryField.value)||void 0===n?void 0:n.length)>1&&(this.funcionarios$=this.funcionarioService.busca(this.queryField.value).pipe((0,_.K)(n=>(this.handleError("Erro ao carregar"),(0,g.c)()))))}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(c.w),e.Y36(A.tT))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-funcionario"]],decls:31,vars:6,consts:[[1,"container"],[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],["type","search","placeholder","Busca matricula/nome","aria-label","Search",1,"form-control","mr-sm-2",3,"formControl"],[1,"btn","btn-outline-success","my-2","my-sm-0",3,"click"],[1,"btn","btn-outline-success","my-2","my-sm-0",3,"routerLink"],[1,"bi","bi-person-plus-fill"],["class","table table-hover",4,"ngIf","ngIfElse"],["loading",""],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"float-end"],[1,"btn","btn-outline-warning","mb-1","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","mb-1","btn-sm",3,"click"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e._uU(1,"\n  "),e.TgZ(2,"legend"),e._uU(3,"Funcionarios"),e.qZA(),e._UZ(4,"br"),e._uU(5,"\n  "),e.TgZ(6,"nav",1),e._uU(7,"\n    "),e.TgZ(8,"div",2),e._uU(9,"\n      "),e._UZ(10,"input",3),e._uU(11,"\n\n      "),e.TgZ(12,"button",4),e.NdJ("click",function(){return o.buscar()}),e._uU(13,"Procurar"),e.qZA(),e._uU(14,"\n      "),e.TgZ(15,"button",5),e._uU(16,"\n        Novo "),e._UZ(17,"i",6),e._uU(18,"\n      "),e.qZA(),e._uU(19,"\n    "),e.qZA(),e._uU(20,"\n  "),e.qZA(),e._uU(21,"\n"),e.qZA(),e._uU(22,"\n\n"),e.TgZ(23,"div",0),e._uU(24,"\n  "),e.YNc(25,x,30,1,"table",7),e.ALo(26,"async"),e._uU(27,"\n"),e.qZA(),e._uU(28,"\n\n"),e.YNc(29,y,7,0,"ng-template",null,8,e.W1O)),2&n){const n=e.MAs(30);e.xp6(10),e.Q6J("formControl",o.queryField),e.xp6(5),e.Q6J("routerLink","cadastrar"),e.xp6(10),e.Q6J("ngIf",e.lcZ(26,4,o.funcionarios$))("ngIfElse",n)}},directives:[t.Fj,t.JJ,t.oH,s.rH,r.O5,r.sg],pipes:[r.Ov],styles:[""]}),n})()},{path:"cadastrar",component:d},{path:"atualizar/:id",component:d}];let S=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.Bz.forChild(F)],s.Bz]}),n})(),J=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[r.ez,S,t.u5,t.UX]]}),n})()}}]);