(self.webpackChunktcc=self.webpackChunktcc||[]).push([[656],{1656:function(n,r,t){"use strict";t.r(r),t.d(r,{OsModule:function(){return w}});var o=t(1116);class i{}var e=t(1462),a=t(7368),s=t(4354),u=t(5522),l=t(1423),c=t(611),m=t(529),g=t(2693);let p=(()=>{class n{constructor(n){this.http=n,this.API=`${m.N.API}os`}list(){return this.http.get(this.API).pipe((0,c.q)(1))}salvarFuncionario(n){return this.http.post(this.API,JSON.stringify(n),{headers:(new g.WM).set("Content-Type","application/json"),responseType:"text"}).pipe((0,c.q)(1))}getOs(n){return this.http.get(`${this.API}/${n}`).pipe((0,c.q)(1))}}return n.\u0275fac=function(r){return new(r||n)(a.LFG(g.eN))},n.\u0275prov=a.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function f(n,r){if(1&n&&(a.TgZ(0,"option",16),a._uU(1),a.qZA()),2&n){const n=r.$implicit;a.Q6J("ngValue",n),a.xp6(1),a.Oqu(n.sigla)}}function d(n,r){if(1&n&&(a.TgZ(0,"option"),a._uU(1),a.qZA()),2&n){const n=r.$implicit;a.xp6(1),a.Oqu(n)}}const Z=function(n){return{"is-invalid":n}};function h(n,r){if(1&n){const n=a.EpF();a.TgZ(0,"form",3),a.NdJ("ngSubmit",function(){return a.CHM(n),a.oxw().onSubmit()}),a.TgZ(1,"legend"),a._uU(2,"Gerar nova OS"),a.qZA(),a.TgZ(3,"div",4),a.TgZ(4,"label",5),a._uU(5,"Maquina:"),a.qZA(),a.TgZ(6,"div",6),a.TgZ(7,"select",7),a.YNc(8,f,2,2,"option",8),a.qZA(),a.TgZ(9,"div",9),a._uU(10,"Selecione a Maquina"),a.qZA(),a.qZA(),a.qZA(),a.TgZ(11,"div",4),a.TgZ(12,"label",10),a._uU(13,"Problema:"),a.qZA(),a.TgZ(14,"div",6),a._UZ(15,"textarea",11),a.TgZ(16,"div",9),a._uU(17,"Descreva o problema da maquina "),a.qZA(),a.qZA(),a.qZA(),a.TgZ(18,"div",4),a.TgZ(19,"label",12),a._uU(20,"Oficina:"),a.qZA(),a.TgZ(21,"div",6),a.TgZ(22,"select",13),a.YNc(23,d,2,1,"option",14),a.qZA(),a.qZA(),a.qZA(),a.TgZ(24,"button",15),a._uU(25,"Salvar"),a.qZA(),a.qZA()}if(2&n){const n=r.ngIf,t=a.oxw();a.Q6J("formGroup",t.formulario),a.xp6(7),a.Q6J("ngClass",a.VKq(5,Z,t.submitted&&t.hasError("maquina"))),a.xp6(1),a.Q6J("ngForOf",n),a.xp6(7),a.Q6J("ngClass",a.VKq(7,Z,t.submitted&&t.hasError("problema"))),a.xp6(8),a.Q6J("ngForOf",t.oficina)}}function q(n,r){1&n&&(a.TgZ(0,"div",17),a.TgZ(1,"span",18),a._uU(2,"Loading..."),a.qZA(),a.qZA())}let b=(()=>{class n{constructor(n,r,t,o,i,e){this.formBuilder=n,this.route=r,this.router=t,this.funcionarioService=o,this.maquinaService=i,this.osService=e,this.submitted=!1,this.oficina=["Calderaria","Eletrica","Mecanica"]}ngOnInit(){this.maquina$=this.maquinaService.list().pipe(),this.formulario=this.formBuilder.group({problema:[null,[e.kI.required,e.kI.minLength(3),e.kI.maxLength(250)]],maquina:[null,e.kI.required],oficina:[null,e.kI.required]})}onSubmit(){if(this.submitted=!0,this.formulario.valid){let n=new i;n.maquina=this.formulario.value.maquina,n.problema=this.formulario.value.problema,n.oficina=this.formulario.value.oficina,this.osService.salvarFuncionario(n).subscribe(n=>{this.formulario.reset(),this.router.navigate(["os"])},n=>{})}}hasError(n){var r;return null===(r=this.formulario.get(n))||void 0===r?void 0:r.errors}}return n.\u0275fac=function(r){return new(r||n)(a.Y36(e.qu),a.Y36(s.gz),a.Y36(s.F0),a.Y36(u.w),a.Y36(l.P),a.Y36(p))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-os-cadastrar"]],decls:5,vars:4,consts:[[1,"container",2,"padding-top","10px","width","60%"],[3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loading",""],[3,"formGroup","ngSubmit"],[1,"row","md-6"],["for","maquina",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["id","maquina","formControlName","maquina",1,"form-control",2,"margin","5px",3,"ngClass"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"invalid-feedback"],["for","problema",1,"col-sm-3","col-form-label"],["type","text","placeholder","Descreva o problema da maquina","formControlName","problema",1,"form-control",2,"margin","5px",3,"ngClass"],["for","oficia",1,"col-sm-3","col-form-label"],["id","oficina","formControlName","oficina",1,"form-control",2,"margin","5px"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary"],[3,"ngValue"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(n,r){if(1&n&&(a.TgZ(0,"div",0),a.YNc(1,h,26,9,"form",1),a.ALo(2,"async"),a.qZA(),a.YNc(3,q,3,0,"ng-template",null,2,a.W1O)),2&n){const n=a.MAs(4);a.xp6(1),a.Q6J("ngIf",a.lcZ(2,2,r.maquina$))("ngIfElse",n)}},directives:[o.O5,e._Y,e.JL,e.sg,e.EJ,e.JJ,e.u,o.mk,o.sg,e.Fj,e.YN,e.Kr],pipes:[o.Ov],styles:[""]}),n})();var v=t(7727),_=t(653),U=t(3193),A=t(1483);function T(n,r){if(1&n&&(a.TgZ(0,"tr"),a._uU(1,"\n          "),a.TgZ(2,"td"),a._uU(3),a.qZA(),a._uU(4,"\n          "),a.TgZ(5,"td"),a._uU(6),a.qZA(),a._uU(7,"\n          "),a.TgZ(8,"td"),a._uU(9),a.qZA(),a._uU(10,"\n          "),a.TgZ(11,"td"),a._uU(12),a.qZA(),a._uU(13,"\n          "),a.TgZ(14,"td"),a._uU(15,"\n            "),a.TgZ(16,"span",10),a._uU(17,"\n              "),a.TgZ(18,"button",11),a._uU(19,"\n                Atualizar\n              "),a.qZA(),a._uU(20,"\n            "),a.qZA(),a._uU(21,"\n\n            "),a.TgZ(22,"button",11),a._uU(23,"\n              Finalizar\n            "),a.qZA(),a._uU(24,"\n          "),a.qZA(),a._uU(25,"\n        "),a.qZA()),2&n){const n=r.$implicit;a.xp6(3),a.Oqu(n.id),a.xp6(3),a.Oqu(n.maquina.sigla),a.xp6(3),a.Oqu(n.oficina),a.xp6(3),a.Oqu(n.statusOs),a.xp6(6),a.Q6J("routerLink","atualizar/"+n.id),a.xp6(4),a.Q6J("routerLink","finalizar/"+n.id)}}function O(n,r){if(1&n&&(a.TgZ(0,"table",8),a._uU(1,"\n      "),a.TgZ(2,"thead"),a._uU(3,"\n        "),a.TgZ(4,"tr"),a._uU(5,"\n          "),a.TgZ(6,"th"),a._uU(7,"Os"),a.qZA(),a._uU(8,"\n          "),a.TgZ(9,"th"),a._uU(10,"Sigla"),a.qZA(),a._uU(11,"\n          "),a.TgZ(12,"th"),a._uU(13,"Oficina"),a.qZA(),a._uU(14,"\n          "),a.TgZ(15,"th"),a._uU(16,"Status"),a.qZA(),a._uU(17,"\n          "),a._UZ(18,"th"),a._uU(19,"\n        "),a.qZA(),a._uU(20,"\n      "),a.qZA(),a._uU(21,"\n      "),a.TgZ(22,"tbody"),a._uU(23,"\n        "),a.YNc(24,T,26,6,"tr",9),a._uU(25,"\n      "),a.qZA(),a._uU(26,"\n    "),a.qZA()),2&n){const n=r.ngIf;a.xp6(24),a.Q6J("ngForOf",n)}}function x(n,r){1&n&&(a._uU(0,"\n  "),a.TgZ(1,"div",12),a._uU(2,"\n    "),a.TgZ(3,"span",13),a._uU(4,"Loading..."),a.qZA(),a._uU(5,"\n  "),a.qZA(),a._uU(6,"\n"))}let y=(()=>{class n{constructor(n,r){this.osService=n,this.modalService=r}ngOnInit(){this.os$=this.osService.list().pipe((0,v.K)(n=>(this.handleError(),(0,_.c)())))}handleError(){this.bsModalRef=this.modalService.show(U.F),this.bsModalRef.content.type="danger",this.bsModalRef.content.message="Erro ao carregar"}}return n.\u0275fac=function(r){return new(r||n)(a.Y36(p),a.Y36(A.tT))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-os"]],decls:30,vars:5,consts:[[1,"container"],[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","mr-sm-2"],[1,"btn","btn-outline-success","my-2","my-sm-0"],[1,"btn","btn-outline-success","my-2","my-sm-0",3,"routerLink"],["class","table table-hover",4,"ngIf","ngIfElse"],["loading",""],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"float-end"],[1,"btn","btn-outline-warning","mb-1","btn-sm",3,"routerLink"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(n,r){if(1&n&&(a._uU(0,"\n"),a.TgZ(1,"div",0),a._uU(2,"\n  "),a.TgZ(3,"legend"),a._uU(4,"Os"),a.qZA(),a._UZ(5,"br"),a._uU(6,"\n  "),a.TgZ(7,"nav",1),a._uU(8,"\n    "),a.TgZ(9,"div",2),a._uU(10,"\n      "),a._UZ(11,"input",3),a._uU(12,"\n\n      "),a.TgZ(13,"button",4),a._uU(14,"Procurar"),a.qZA(),a._uU(15,"\n      "),a.TgZ(16,"button",5),a._uU(17,"\n        Novo\n      "),a.qZA(),a._uU(18,"\n    "),a.qZA(),a._uU(19,"\n  "),a.qZA(),a._uU(20,"\n\n  "),a.TgZ(21,"div",0),a._uU(22,"\n    "),a.YNc(23,O,27,1,"table",6),a.ALo(24,"async"),a._uU(25,"\n  "),a.qZA(),a._uU(26,"\n\n"),a.qZA(),a._uU(27,"\n\n\n\n"),a.YNc(28,x,7,0,"ng-template",null,7,a.W1O)),2&n){const n=a.MAs(29);a.xp6(16),a.Q6J("routerLink","cadastrar"),a.xp6(7),a.Q6J("ngIf",a.lcZ(24,3,r.os$))("ngIfElse",n)}},directives:[s.rH,o.O5,o.sg],pipes:[o.Ov],styles:[""]}),n})(),I=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(r){return new(r||n)},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-os-finalizar"]],decls:2,vars:0,template:function(n,r){1&n&&(a.TgZ(0,"p"),a._uU(1,"os-finalizar works!"),a.qZA())},styles:[""]}),n})();const S=function(n){return{"is-invalid":n}};function k(n,r){if(1&n&&(a.TgZ(0,"div",2),a.TgZ(1,"legend"),a._uU(2,"Atualizar Os"),a.qZA(),a._UZ(3,"br"),a.TgZ(4,"form",3),a.TgZ(5,"div",4),a.TgZ(6,"div",5),a.TgZ(7,"label",6),a._uU(8,"OS:"),a.qZA(),a._UZ(9,"input",7),a.qZA(),a.TgZ(10,"div",8),a.TgZ(11,"label",9),a._uU(12,"Maquina:"),a.qZA(),a._UZ(13,"input",10),a.qZA(),a.qZA(),a.TgZ(14,"div",4),a.TgZ(15,"div",11),a.TgZ(16,"label",12),a._uU(17,"Problema:"),a.qZA(),a._UZ(18,"textarea",13),a.TgZ(19,"div",14),a._uU(20,"Descreva o problema da maquina "),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&n){const n=a.oxw();a.xp6(4),a.Q6J("formGroup",n.formulario),a.xp6(14),a.Q6J("ngClass",a.VKq(2,S,n.submitted&&n.hasError("problema")))}}function J(n,r){1&n&&(a.TgZ(0,"div",15),a.TgZ(1,"span",16),a._uU(2,"Loading..."),a.qZA(),a.qZA())}const Y=[{path:"",component:y},{path:"cadastrar",component:b},{path:"atualizar/:id",component:(()=>{class n{constructor(n,r,t,o,i){this.osService=n,this.modalService=r,this.formBuilder=t,this.route=o,this.router=i,this.submitted=!1,this.inscricao=this.route.params.subscribe(n=>{this.os$=this.osService.getOs(n.id).pipe((0,v.K)(n=>(this.handleError(),this.router.navigate(["os"]),(0,_.c)())))})}ngOnInit(){this.formulario=this.formBuilder.group({problema:[null,[e.kI.required,e.kI.minLength(3),e.kI.maxLength(250)]],id:[null,e.kI.required],sigla:[null,e.kI.required],oficina:[null,e.kI.required]}),this.os$.subscribe(n=>{this.os=n,n&&this.povoar()}),console.log(this.os)}povoar(){var n,r,t;null===(n=this.formulario.get("id"))||void 0===n||n.setValue(this.os.id),null===(r=this.formulario.get("sigla"))||void 0===r||r.setValue(this.os.maquina.sigla),null===(t=this.formulario.get("problema"))||void 0===t||t.setValue(this.os.problema)}handleError(){this.bsModalRef=this.modalService.show(U.F),this.bsModalRef.content.type="danger",this.bsModalRef.content.message="Erro ao carregar"}hasError(n){var r;return null===(r=this.formulario.get(n))||void 0===r?void 0:r.errors}}return n.\u0275fac=function(r){return new(r||n)(a.Y36(p),a.Y36(A.tT),a.Y36(e.qu),a.Y36(s.gz),a.Y36(s.F0))},n.\u0275cmp=a.Xpm({type:n,selectors:[["app-os-atualizar"]],decls:3,vars:2,consts:[["class","container",4,"ngIf","ngIfElse"],["loading",""],[1,"container"],[3,"formGroup"],[1,"form-row"],[1,"form-group","col-md-3"],["for","osNumero"],["type","text","readonly","","formControlName","id","id","osNumero",1,"form-control"],[1,"form-group","col-md-6"],["for","maquina"],["type","text","readonly","","formControlName","sigla","id","maquina",1,"form-control"],[1,"form-group","col-md-9"],["for","problema"],["type","text","id","problema","placeholder","Descreva o problema da maquina","formControlName","problema",1,"form-control",2,"margin","5px",3,"ngClass"],[1,"invalid-feedback"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(n,r){if(1&n&&(a.YNc(0,k,21,4,"div",0),a.YNc(1,J,3,0,"ng-template",null,1,a.W1O)),2&n){const n=a.MAs(2);a.Q6J("ngIf",r.os$)("ngIfElse",n)}},directives:[o.O5,e._Y,e.JL,e.sg,e.Fj,e.JJ,e.u,o.mk],styles:[""]}),n})()},{path:"finalizar/:id",component:I}];let N=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[s.Bz.forChild(Y)],s.Bz]}),n})(),w=(()=>{class n{}return n.\u0275fac=function(r){return new(r||n)},n.\u0275mod=a.oAB({type:n}),n.\u0275inj=a.cJS({imports:[[o.ez,N,e.u5,e.UX]]}),n})()}}]);