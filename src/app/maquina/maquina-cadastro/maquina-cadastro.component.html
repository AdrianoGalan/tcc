<form [formGroup]="formulario" (ngSubmit)="onSubmit()">
  <legend>Cadastro Maquina</legend><br>
  <div class="form-group row">
    <label for="sigla" class="col-sm-3 col-form-label">Sigla:</label>
    <div class="col-sm-9">
      <input
        type="text"
        class="form-control"
        autocomplete="off"
        placeholder="Digite uma Sigla"
        formControlName="sigla"
        id="siglaNova"
        [ngClass]="{ 'is-invalid': submitted && hasError('sigla') }"
      />
      <div class="invalid-feedback">Digite a sigla</div>
    </div>
  </div>

  <div class="form-group row">
    <label for="dataCompra" class="col-sm-3 col-form-label">Data Compra:</label>
    <div class="col-sm-9">
      <input
        type="date"
        class="form-control"
        autocomplete="off"
        formControlName="dataCompra"
        id="dataCompra"
        [ngClass]="{ 'is-invalid': submitted && hasError('dataCompra') }"
      />
      <div class="invalid-feedback">Digite a Data da compra</div>
    </div>
  </div>

  <div class="form-group row">
    <label for="fabricante" class="col-sm-3 col-form-label">Fabricante:</label>
    <div class="col-sm-8">
      <select
        style="margin: 5px"
        id="fabricante"
        class="form-control"
        formControlName="fabricante"
        [compareWith]="comparar"
        [ngClass]="{ 'is-invalid': submitted && hasError('fabricante') }"
      >
        <option *ngFor="let f of fabricante$ | async" [ngValue]="f">
          {{ f.id }} - {{ f.pessoa.nome }}
        </option>
      </select>
      <div class="invalid-feedback">Selecione um Fabricante</div>
    </div>
    <div class="col-sm-1">
      <i
        (click)="addFabricante()"
        class="bi bi-plus-circle-fill"
        style="font-size: 2rem; color: rgb(30, 126, 11)"
        tooltip="adicionar novo Fabricante"
      ></i>
    </div>
  </div>

  <div class="form-group row">
    <label for="setor" class="col-sm-3 col-form-label">Setor:</label>
    <div class="col-sm-8">
      <select
        style="margin: 5px"
        id="setor"
        class="form-control"
        formControlName="setor"
        [compareWith]="comparar"
        [ngClass]="{ 'is-invalid': submitted && hasError('setor') }"
      >
        <option *ngFor="let s of setor$ | async" [ngValue]="s">
          {{ s.id }} - {{ s.nome }}
        </option>
      </select>
      <div class="invalid-feedback">Selecione um Setor</div>
    </div>
    <div class="col-sm-1">
      <i
        (click)="addSetor()"
        class="bi bi-plus-circle-fill"
        style="font-size: 2rem; color: rgb(30, 126, 11)"
        tooltip="adicionar novo setor"
      ></i>
    </div>
  </div>

  <div class="form-group row">
    <div class="col-sm-9">
      <button type="submit" class="btn btn-primary">Salvar</button>
    </div>
  </div>
</form>

<ng-template #novoFabricante>
  <div class="spinner-border" role="status">
    <span class="sr-only">Loading...</span>
  </div>
</ng-template>
