(self.webpackChunktcc=self.webpackChunktcc||[]).push([[489],{2489:function(n,o,i){"use strict";i.r(o),i.d(o,{UsuarioModule:function(){return w}});var r=i(1462),t=i(1116),u=i(2419),e=i(7368),s=i(5522),a=i(1279),l=i(611),c=i(2693),h=i(529);let g=(()=>{class n{constructor(n){this.http=n,this.API=`${h.N.API}usuario`}list(){return this.http.get(this.API).pipe((0,l.q)(1))}busca(n){return this.http.get(`${this.API}/busca/${n}`).pipe((0,l.q)(1))}getUsuario(n){return this.http.get(`${this.API}/${n}`).pipe((0,l.q)(1))}deleteUsuario(n){return this.http.put(`${this.API}/delete/`,JSON.stringify(n),{headers:(new c.WM).set("Content-Type","application/json"),responseType:"text"}).pipe((0,l.q)(1))}salvarUsuario(n){return this.http.post(this.API,JSON.stringify(n),{headers:(new c.WM).set("Content-Type","application/json"),responseType:"text"}).pipe((0,l.q)(1))}}return n.\u0275fac=function(o){return new(o||n)(e.LFG(c.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function p(n,o){if(1&n&&(e.TgZ(0,"option",17),e._uU(1),e.qZA()),2&n){const n=o.$implicit;e.Q6J("ngValue",n),e.xp6(1),e.AsE("\n          ",n.matricula," - ",n.pessoa.nome,"\n        ")}}function U(n,o){if(1&n){const n=e.EpF();e.TgZ(0,"form",2),e.NdJ("ngSubmit",function(){return e.CHM(n),e.oxw().onSubmit()}),e._uU(1,"\n"),e.TgZ(2,"legend"),e._uU(3,"Cadastro Usuario"),e.qZA(),e._UZ(4,"br"),e._uU(5,"\n  "),e.TgZ(6,"div",3),e._uU(7,"\n    "),e.TgZ(8,"label",4),e._uU(9,"Funcionario:"),e.qZA(),e._uU(10,"\n    "),e.TgZ(11,"div",5),e._uU(12,"\n      "),e.TgZ(13,"select",6),e._uU(14,"\n        "),e.YNc(15,p,2,3,"option",7),e._uU(16,"\n      "),e.qZA(),e._uU(17,"\n    "),e.qZA(),e._uU(18,"\n  "),e.qZA(),e._uU(19,"\n\n  "),e.TgZ(20,"div",3),e._uU(21,"\n    "),e.TgZ(22,"label",4),e._uU(23,"Tipo Acesso:"),e.qZA(),e._uU(24,"\n    "),e.TgZ(25,"div",5),e._uU(26,"\n      "),e.TgZ(27,"select",8),e._uU(28,"\n        "),e.TgZ(29,"option",9),e._uU(30,"Usuario"),e.qZA(),e._uU(31,"\n        "),e.TgZ(32,"option",10),e._uU(33,"Manutentor"),e.qZA(),e._uU(34,"\n        "),e.TgZ(35,"option",11),e._uU(36,"Administrador"),e.qZA(),e._uU(37,"\n      "),e.qZA(),e._uU(38,"\n    "),e.qZA(),e._uU(39,"\n  "),e.qZA(),e._uU(40,"\n\n  "),e.TgZ(41,"div",3),e._uU(42,"\n    "),e.TgZ(43,"label",12),e._uU(44,"Login:"),e.qZA(),e._uU(45,"\n    "),e.TgZ(46,"div",5),e._uU(47,"\n      "),e._UZ(48,"input",13),e._uU(49,"\n    "),e.qZA(),e._uU(50,"\n  "),e.qZA(),e._uU(51,"\n\n  "),e.TgZ(52,"div",3),e._uU(53,"\n    "),e.TgZ(54,"label",14),e._uU(55,"Senha:"),e.qZA(),e._uU(56,"\n    "),e.TgZ(57,"div",5),e._uU(58,"\n      "),e._UZ(59,"input",15),e._uU(60,"\n    "),e.qZA(),e._uU(61,"\n  "),e.qZA(),e._uU(62,"\n\n  "),e.TgZ(63,"div",3),e._uU(64,"\n    "),e.TgZ(65,"div",5),e._uU(66,"\n      "),e.TgZ(67,"button",16),e._uU(68,"Salvar"),e.qZA(),e._uU(69,"\n    "),e.qZA(),e._uU(70,"\n  "),e.qZA(),e._uU(71,"\n"),e.qZA()}if(2&n){const n=o.ngIf,i=e.oxw();e.Q6J("formGroup",i.formulario),e.xp6(13),e.Q6J("compareWith",i.comparar),e.xp6(2),e.Q6J("ngForOf",n)}}function f(n,o){1&n&&(e._uU(0,"\n  "),e.TgZ(1,"div",18),e._uU(2,"\n    "),e.TgZ(3,"span",19),e._uU(4,"Loading..."),e.qZA(),e._uU(5,"\n  "),e.qZA(),e._uU(6,"\n"))}let m=(()=>{class n{constructor(n,o,i,r,t){this.formBuilder=n,this.funcionarioService=o,this.route=i,this.router=r,this.usuarioService=t,this.novo=!1,this.inscricao=this.route.params.subscribe(n=>{let o=n.login;null==o?this.novo=!0:this.usuarioService.getUsuario(o).subscribe(n=>{this.usuario=n,n&&this.povoar()})})}ngOnInit(){this.funcionarios$=this.funcionarioService.list(),this.formulario=this.formBuilder.group({login:[null,r.kI.required],senha:[null,[r.kI.required,r.kI.minLength(3)]],funcionario:[null,r.kI.required],permissao:[null,r.kI.required]})}onSubmit(){this.formulario.valid?this.novo?(this.usuario=new u.b,this.usuario.funcionario=this.formulario.value.funcionario,this.usuario.senha=this.formulario.value.senha,this.usuario.login=this.formulario.value.login,this.usuario.permissao=this.formulario.value.permissao,this.usuarioService.salvarUsuario(this.usuario).subscribe(n=>{this.formulario.reset(),this.router.navigate(["usuario"])},n=>{console.log(n)})):(this.usuario.funcionario=this.formulario.value.funcionario,this.usuario.senha=this.formulario.value.senha,this.usuario.login=this.formulario.value.login,this.usuario.permissao=this.formulario.value.permissao,this.usuarioService.salvarUsuario(this.usuario).subscribe(n=>{this.formulario.reset(),this.router.navigate(["usuario"])},n=>{console.log(n)})):console.log("n\xe3o \xe9 valido")}comparar(n,o){return n&&o?n.matricula===o.matricula:n===o}povoar(){var n,o,i,r;null===(n=this.formulario.get("funcionario"))||void 0===n||n.setValue(this.usuario.funcionario),null===(o=this.formulario.get("permissao"))||void 0===o||o.setValue(this.usuario.permissao),null===(i=this.formulario.get("senha"))||void 0===i||i.setValue(this.usuario.senha),null===(r=this.formulario.get("login"))||void 0===r||r.setValue(this.usuario.login)}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(r.qu),e.Y36(s.w),e.Y36(a.gz),e.Y36(a.F0),e.Y36(g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-usuario-cadastro"]],decls:6,vars:4,consts:[["style","padding: 10px",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loading",""],[2,"padding","10px",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","funcao",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["id","funcionario","formControlName","funcionario",1,"form-control",2,"margin","5px",3,"compareWith"],[3,"ngValue",4,"ngFor","ngForOf"],["id","permissao","formControlName","permissao",1,"form-control",2,"margin","5px"],["value","1"],["value","2"],["value","3"],["for","loginNovo",1,"col-sm-3","col-form-label"],["type","text","placeholder","Digite um login","formControlName","login","id","loginNovo",1,"form-control"],["for","senhaNova",1,"col-sm-3","col-form-label"],["type","password","placeholder","Digite uma senha","formControlName","senha","id","senhaNova",1,"form-control"],["type","submit",1,"btn","btn-primary"],[3,"ngValue"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(n,o){if(1&n&&(e.YNc(0,U,72,3,"form",0),e.ALo(1,"async"),e._uU(2,"\n\n"),e.YNc(3,f,7,0,"ng-template",null,1,e.W1O),e._uU(5,"\n")),2&n){const n=e.MAs(4);e.Q6J("ngIf",e.lcZ(1,2,o.funcionarios$))("ngIfElse",n)}},directives:[t.O5,r._Y,r.JL,r.sg,r.EJ,r.JJ,r.u,t.sg,r.YN,r.Kr,r.Fj],pipes:[t.Ov],styles:[""]}),n})();var _=i(653),Z=i(9996),d=i(7701),v=i(8720),b=i(6599),q=i(7727),A=i(3193),T=i(1483);const y=function(n){return[n]};function I(n,o){if(1&n){const n=e.EpF();e.TgZ(0,"tr"),e._uU(1,"\n                    "),e.TgZ(2,"td"),e._uU(3),e.qZA(),e._uU(4,"\n                    "),e.TgZ(5,"td"),e._uU(6),e.qZA(),e._uU(7,"\n                    "),e.TgZ(8,"td"),e._uU(9,"\n                        "),e.TgZ(10,"span",10),e._uU(11,"\n\n                            "),e.TgZ(12,"button",11),e._uU(13,"\n                                Atualizar\n                            "),e.qZA(),e._uU(14,"\n\n                            "),e.TgZ(15,"button",12),e.NdJ("click",function(){const o=e.CHM(n).$implicit;return e.oxw(2).onDelete(o)}),e._uU(16,"\n                                Remover\n                            "),e.qZA(),e._uU(17,"\n                        "),e.qZA(),e._uU(18,"\n                    "),e.qZA(),e._uU(19,"\n                "),e.qZA()}if(2&n){const n=o.$implicit;e.xp6(3),e.Oqu(n.login),e.xp6(3),e.Oqu(n.funcionario.pessoa.nome),e.xp6(6),e.Q6J("routerLink","atualizar/"+e.VKq(3,y,n.login))}}function N(n,o){if(1&n&&(e.TgZ(0,"table",8),e._uU(1,"\n            "),e.TgZ(2,"thead"),e._uU(3,"\n                "),e.TgZ(4,"tr"),e._uU(5,"\n                    "),e.TgZ(6,"th"),e._uU(7,"Login"),e.qZA(),e._uU(8,"\n                    "),e.TgZ(9,"th"),e._uU(10,"Nome"),e.qZA(),e._uU(11,"\n                    "),e._UZ(12,"th"),e._uU(13,"\n                "),e.qZA(),e._uU(14,"\n            "),e.qZA(),e._uU(15,"\n            "),e.TgZ(16,"tbody"),e._uU(17,"\n                "),e.YNc(18,I,20,5,"tr",9),e._uU(19,"\n            "),e.qZA(),e._uU(20,"\n        "),e.qZA()),2&n){const n=o.ngIf;e.xp6(18),e.Q6J("ngForOf",n)}}function J(n,o){1&n&&(e._uU(0,"\n    "),e.TgZ(1,"div",13),e._uU(2,"\n        "),e.TgZ(3,"span",14),e._uU(4,"Loading..."),e.qZA(),e._uU(5,"\n    "),e.qZA(),e._uU(6,"\n"))}const x=[{path:"",component:(()=>{class n{constructor(n,o){this.service=n,this.modalService=o,this.queryField=new r.NI}ngOnInit(){this.onRefresh(),this.queryField.valueChanges.pipe((0,Z.U)(n=>n.trim()),(0,d.b)(300),(0,v.x)(),(0,b.b)(n=>this.consulta(n))).subscribe()}consulta(n){n.length>0?this.usuarios$=this.service.busca(n).pipe((0,q.K)(n=>(this.handleError("Erro ao carregar"),(0,_.c)()))):this.onRefresh()}onRefresh(){this.usuarios$=this.service.list().pipe((0,q.K)(n=>(this.handleError("Erro ao carregar"),(0,_.c)())))}onDelete(n){this.service.deleteUsuario(n).subscribe(n=>{this.handleError("Usuario Deletado"),this.ngOnInit()},n=>{this.handleError("Erro ao Deletar")})}buscar(){var n;(null===(n=this.queryField.value)||void 0===n?void 0:n.length)>1&&(this.usuarios$=this.service.busca(this.queryField.value).pipe((0,q.K)(n=>(this.handleError("Erro ao carregar"),(0,_.c)()))))}handleError(n){this.bsModalRef=this.modalService.show(A.F),this.bsModalRef.content.type="danger",this.bsModalRef.content.message=n}}return n.\u0275fac=function(o){return new(o||n)(e.Y36(g),e.Y36(T.tT))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-usuario"]],decls:29,vars:6,consts:[[1,"container"],[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],["type","search","placeholder","Busca Login","aria-label","Search",1,"form-control","mr-sm-2",3,"formControl"],[1,"btn","btn-outline-success","my-2","my-sm-0",3,"click"],[1,"btn","btn-outline-success","my-2","my-sm-0",3,"routerLink"],["class","table table-hover",4,"ngIf","ngIfElse"],["loading",""],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"float-end"],[1,"btn","btn-outline-warning","mb-1","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","mb-1","btn-sm",3,"click"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e._uU(1,"\n    "),e.TgZ(2,"legend"),e._uU(3,"Usuarios"),e.qZA(),e._UZ(4,"br"),e._uU(5,"\n    "),e.TgZ(6,"nav",1),e._uU(7,"\n        "),e.TgZ(8,"div",2),e._uU(9,"\n            "),e._UZ(10,"input",3),e._uU(11,"\n\n            "),e.TgZ(12,"button",4),e.NdJ("click",function(){return o.buscar()}),e._uU(13,"Procurar"),e.qZA(),e._uU(14,"\n            "),e.TgZ(15,"button",5),e._uU(16,"Novo"),e.qZA(),e._uU(17,"\n        "),e.qZA(),e._uU(18,"\n    "),e.qZA(),e._uU(19,"\n\n    "),e.TgZ(20,"div",0),e._uU(21,"\n\n        "),e.YNc(22,N,21,1,"table",6),e.ALo(23,"async"),e._uU(24,"\n\n    "),e.qZA(),e._uU(25,"\n\n"),e.qZA(),e._uU(26,"\n\n"),e.YNc(27,J,7,0,"ng-template",null,7,e.W1O)),2&n){const n=e.MAs(28);e.xp6(10),e.Q6J("formControl",o.queryField),e.xp6(5),e.Q6J("routerLink","novo"),e.xp6(7),e.Q6J("ngIf",e.lcZ(23,4,o.usuarios$))("ngIfElse",n)}},directives:[r.Fj,r.JJ,r.oH,a.rH,t.O5,t.sg],pipes:[t.Ov],styles:[""]}),n})()},{path:"novo",component:m},{path:"atualizar/:login",component:m}];let S=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.Bz.forChild(x)],a.Bz]}),n})(),w=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[t.ez,S,r.u5,r.UX]]}),n})()}}]);