!function(){function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}function o(n,o){for(var i=0;i<o.length;i++){var u=o[i];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(n,u.key,u)}}function i(n,i,u){return i&&o(n.prototype,i),u&&o(n,u),n}(self.webpackChunktcc=self.webpackChunktcc||[]).push([[489],{2489:function(o,u,r){"use strict";r.r(u),r.d(u,{UsuarioModule:function(){return x}});var t=r(1462),e=r(1116),a=r(2419),s=r(7368),l=r(5522),c=r(4354),f=r(611),g=r(2693),p=r(529),h=function(){var o=function(){function o(i){n(this,o),this.http=i,this.API="".concat(p.N.API,"usuario")}return i(o,[{key:"list",value:function(){return this.http.get(this.API).pipe((0,f.q)(1))}},{key:"getUsuario",value:function(n){return this.http.get("".concat(this.API,"/").concat(n)).pipe((0,f.q)(1))}},{key:"deleteUsuario",value:function(n){return this.http.put("".concat(this.API,"/delete/"),JSON.stringify(n),{headers:(new g.WM).set("Content-Type","application/json"),responseType:"text"}).pipe((0,f.q)(1))}},{key:"salvarUsuario",value:function(n){return this.http.post(this.API,JSON.stringify(n),{headers:(new g.WM).set("Content-Type","application/json"),responseType:"text"}).pipe((0,f.q)(1))}}]),o}();return o.\u0275fac=function(n){return new(n||o)(s.LFG(g.eN))},o.\u0275prov=s.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o}();function U(n,o){if(1&n&&(s.TgZ(0,"option",17),s._uU(1),s.qZA()),2&n){var i=o.$implicit;s.Q6J("ngValue",i),s.xp6(1),s.AsE("\n          ",i.matricula," - ",i.pessoa.nome,"\n        ")}}function m(n,o){if(1&n){var i=s.EpF();s.TgZ(0,"form",2),s.NdJ("ngSubmit",function(){return s.CHM(i),s.oxw().onSubmit()}),s._uU(1,"\n"),s.TgZ(2,"legend"),s._uU(3,"Cadastro Usuario"),s.qZA(),s._UZ(4,"br"),s._uU(5,"\n  "),s.TgZ(6,"div",3),s._uU(7,"\n    "),s.TgZ(8,"label",4),s._uU(9,"Funcionario:"),s.qZA(),s._uU(10,"\n    "),s.TgZ(11,"div",5),s._uU(12,"\n      "),s.TgZ(13,"select",6),s._uU(14,"\n        "),s.YNc(15,U,2,3,"option",7),s._uU(16,"\n      "),s.qZA(),s._uU(17,"\n    "),s.qZA(),s._uU(18,"\n  "),s.qZA(),s._uU(19,"\n\n  "),s.TgZ(20,"div",3),s._uU(21,"\n    "),s.TgZ(22,"label",4),s._uU(23,"Tipo Acesso:"),s.qZA(),s._uU(24,"\n    "),s.TgZ(25,"div",5),s._uU(26,"\n      "),s.TgZ(27,"select",8),s._uU(28,"\n        "),s.TgZ(29,"option",9),s._uU(30,"Usuario"),s.qZA(),s._uU(31,"\n        "),s.TgZ(32,"option",10),s._uU(33,"Manutentor"),s.qZA(),s._uU(34,"\n        "),s.TgZ(35,"option",11),s._uU(36,"Administrador"),s.qZA(),s._uU(37,"\n      "),s.qZA(),s._uU(38,"\n    "),s.qZA(),s._uU(39,"\n  "),s.qZA(),s._uU(40,"\n\n  "),s.TgZ(41,"div",3),s._uU(42,"\n    "),s.TgZ(43,"label",12),s._uU(44,"Login:"),s.qZA(),s._uU(45,"\n    "),s.TgZ(46,"div",5),s._uU(47,"\n      "),s._UZ(48,"input",13),s._uU(49,"\n    "),s.qZA(),s._uU(50,"\n  "),s.qZA(),s._uU(51,"\n\n  "),s.TgZ(52,"div",3),s._uU(53,"\n    "),s.TgZ(54,"label",14),s._uU(55,"Senha:"),s.qZA(),s._uU(56,"\n    "),s.TgZ(57,"div",5),s._uU(58,"\n      "),s._UZ(59,"input",15),s._uU(60,"\n    "),s.qZA(),s._uU(61,"\n  "),s.qZA(),s._uU(62,"\n\n  "),s.TgZ(63,"div",3),s._uU(64,"\n    "),s.TgZ(65,"div",5),s._uU(66,"\n      "),s.TgZ(67,"button",16),s._uU(68,"Salvar"),s.qZA(),s._uU(69,"\n    "),s.qZA(),s._uU(70,"\n  "),s.qZA(),s._uU(71,"\n"),s.qZA()}if(2&n){var u=o.ngIf,r=s.oxw();s.Q6J("formGroup",r.formulario),s.xp6(13),s.Q6J("compareWith",r.comparar),s.xp6(2),s.Q6J("ngForOf",u)}}function v(n,o){1&n&&(s._uU(0,"\n  "),s.TgZ(1,"div",18),s._uU(2,"\n    "),s.TgZ(3,"span",19),s._uU(4,"Loading..."),s.qZA(),s._uU(5,"\n  "),s.qZA(),s._uU(6,"\n"))}var _=function(){var o=function(){function o(i,u,r,t,e){var a=this;n(this,o),this.formBuilder=i,this.funcionarioService=u,this.route=r,this.router=t,this.usuarioService=e,this.novo=!1,this.inscricao=this.route.params.subscribe(function(n){var o=n.login;null==o?a.novo=!0:a.usuarioService.getUsuario(o).subscribe(function(n){a.usuario=n,n&&a.povoar()})})}return i(o,[{key:"ngOnInit",value:function(){this.funcionarios$=this.funcionarioService.list(),this.formulario=this.formBuilder.group({login:[null,t.kI.required],senha:[null,[t.kI.required,t.kI.minLength(3)]],funcionario:[null,t.kI.required],permissao:[null,t.kI.required]})}},{key:"onSubmit",value:function(){var n=this;this.formulario.valid?this.novo?(this.usuario=new a.b,this.usuario.funcionario=this.formulario.value.funcionario,this.usuario.senha=this.formulario.value.senha,this.usuario.login=this.formulario.value.login,this.usuario.permissao=this.formulario.value.permissao,this.usuarioService.salvarUsuario(this.usuario).subscribe(function(o){n.formulario.reset(),n.router.navigate(["usuario"])},function(n){console.log(n)})):(this.usuario.funcionario=this.formulario.value.funcionario,this.usuario.senha=this.formulario.value.senha,this.usuario.login=this.formulario.value.login,this.usuario.permissao=this.formulario.value.permissao,this.usuarioService.salvarUsuario(this.usuario).subscribe(function(o){n.formulario.reset(),n.router.navigate(["usuario"])},function(n){console.log(n)})):console.log("n\xe3o \xe9 valido")}},{key:"comparar",value:function(n,o){return n&&o?n.matricula===o.matricula:n===o}},{key:"povoar",value:function(){var n,o,i,u;null===(n=this.formulario.get("funcionario"))||void 0===n||n.setValue(this.usuario.funcionario),null===(o=this.formulario.get("permissao"))||void 0===o||o.setValue(this.usuario.permissao),null===(i=this.formulario.get("senha"))||void 0===i||i.setValue(this.usuario.senha),null===(u=this.formulario.get("login"))||void 0===u||u.setValue(this.usuario.login)}}]),o}();return o.\u0275fac=function(n){return new(n||o)(s.Y36(t.qu),s.Y36(l.w),s.Y36(c.gz),s.Y36(c.F0),s.Y36(h))},o.\u0275cmp=s.Xpm({type:o,selectors:[["app-usuario-cadastro"]],decls:6,vars:4,consts:[["style","padding: 10px",3,"formGroup","ngSubmit",4,"ngIf","ngIfElse"],["loading",""],[2,"padding","10px",3,"formGroup","ngSubmit"],[1,"form-group","row"],["for","funcao",1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["id","funcionario","formControlName","funcionario",1,"form-control",2,"margin","5px",3,"compareWith"],[3,"ngValue",4,"ngFor","ngForOf"],["id","permissao","formControlName","permissao",1,"form-control",2,"margin","5px"],["value","1"],["value","2"],["value","3"],["for","loginNovo",1,"col-sm-3","col-form-label"],["type","text","placeholder","Digite um login","formControlName","login","id","loginNovo",1,"form-control"],["for","senhaNova",1,"col-sm-3","col-form-label"],["type","password","placeholder","Digite uma senha","formControlName","senha","id","senhaNova",1,"form-control"],["type","submit",1,"btn","btn-primary"],[3,"ngValue"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(n,o){if(1&n&&(s.YNc(0,m,72,3,"form",0),s.ALo(1,"async"),s._uU(2,"\n\n"),s.YNc(3,v,7,0,"ng-template",null,1,s.W1O),s._uU(5,"\n")),2&n){var i=s.MAs(4);s.Q6J("ngIf",s.lcZ(1,2,o.funcionarios$))("ngIfElse",i)}},directives:[e.O5,t._Y,t.JL,t.sg,t.EJ,t.JJ,t.u,e.sg,t.YN,t.Kr,t.Fj],pipes:[e.Ov],styles:[""]}),o}(),Z=r(653),d=r(7727),b=r(3193),A=r(1483),q=function(n){return[n]};function T(n,o){if(1&n){var i=s.EpF();s.TgZ(0,"tr"),s._uU(1,"\n                    "),s.TgZ(2,"td"),s._uU(3),s.qZA(),s._uU(4,"\n                    "),s.TgZ(5,"td"),s._uU(6),s.qZA(),s._uU(7,"\n                    "),s.TgZ(8,"td"),s._uU(9,"\n                        "),s.TgZ(10,"span",10),s._uU(11,"\n\n                            "),s.TgZ(12,"button",11),s._uU(13,"\n                                Atualizar\n                            "),s.qZA(),s._uU(14,"\n                       \n                            "),s.TgZ(15,"button",12),s.NdJ("click",function(){var n=s.CHM(i).$implicit;return s.oxw(2).onDelete(n)}),s._uU(16,"\n                                Remover\n                            "),s.qZA(),s._uU(17,"\n                        "),s.qZA(),s._uU(18,"\n                    "),s.qZA(),s._uU(19,"\n                "),s.qZA()}if(2&n){var u=o.$implicit;s.xp6(3),s.Oqu(u.login),s.xp6(3),s.Oqu(u.funcionario.pessoa.nome),s.xp6(6),s.Q6J("routerLink","atualizar/"+s.VKq(3,q,u.login))}}function y(n,o){if(1&n&&(s.TgZ(0,"table",8),s._uU(1,"\n            "),s.TgZ(2,"thead"),s._uU(3,"\n                "),s.TgZ(4,"tr"),s._uU(5,"\n                    "),s.TgZ(6,"th"),s._uU(7,"Login"),s.qZA(),s._uU(8,"\n                    "),s.TgZ(9,"th"),s._uU(10,"Nome"),s.qZA(),s._uU(11,"\n                    "),s._UZ(12,"th"),s._uU(13,"\n                "),s.qZA(),s._uU(14,"\n            "),s.qZA(),s._uU(15,"\n            "),s.TgZ(16,"tbody"),s._uU(17,"\n                "),s.YNc(18,T,20,5,"tr",9),s._uU(19,"\n            "),s.qZA(),s._uU(20,"\n        "),s.qZA()),2&n){var i=o.ngIf;s.xp6(18),s.Q6J("ngForOf",i)}}function k(n,o){1&n&&(s._uU(0,"\n    "),s.TgZ(1,"div",13),s._uU(2,"\n        "),s.TgZ(3,"span",14),s._uU(4,"Loading..."),s.qZA(),s._uU(5,"\n    "),s.qZA(),s._uU(6,"\n"))}var I,N,w=[{path:"",component:(I=function(){function o(i,u){n(this,o),this.service=i,this.modalService=u}return i(o,[{key:"ngOnInit",value:function(){var n=this;this.usuarios$=this.service.list().pipe((0,d.K)(function(o){return n.handleError("Erro ao carregar"),(0,Z.c)()}))}},{key:"onDelete",value:function(n){var o=this;this.service.deleteUsuario(n).subscribe(function(n){o.handleError("Usuario Deletado"),o.ngOnInit()},function(n){o.handleError("Erro ao Deletar")})}},{key:"handleError",value:function(n){this.bsModalRef=this.modalService.show(b.F),this.bsModalRef.content.type="danger",this.bsModalRef.content.message=n}}]),o}(),I.\u0275fac=function(n){return new(n||I)(s.Y36(h),s.Y36(A.tT))},I.\u0275cmp=s.Xpm({type:I,selectors:[["app-usuario"]],decls:29,vars:5,consts:[[1,"container"],[1,"navbar","navbar-light","bg-light"],[1,"form-inline"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","mr-sm-2"],[1,"btn","btn-outline-success","my-2","my-sm-0"],[1,"btn","btn-outline-success","my-2","my-sm-0",3,"routerLink"],["class","table table-hover",4,"ngIf","ngIfElse"],["loading",""],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[1,"float-end"],[1,"btn","btn-outline-warning","mb-1","btn-sm",3,"routerLink"],[1,"btn","btn-outline-danger","mb-1","btn-sm",3,"click"],["role","status",1,"spinner-border"],[1,"sr-only"]],template:function(n,o){if(1&n&&(s.TgZ(0,"div",0),s._uU(1,"\n    "),s.TgZ(2,"legend"),s._uU(3,"Usuarios"),s.qZA(),s._UZ(4,"br"),s._uU(5,"\n    "),s.TgZ(6,"nav",1),s._uU(7,"\n        "),s.TgZ(8,"div",2),s._uU(9,"\n            "),s._UZ(10,"input",3),s._uU(11,"\n\n            "),s.TgZ(12,"button",4),s._uU(13,"Procurar"),s.qZA(),s._uU(14,"\n            "),s.TgZ(15,"button",5),s._uU(16,"Novo"),s.qZA(),s._uU(17,"\n        "),s.qZA(),s._uU(18,"\n    "),s.qZA(),s._uU(19,"\n\n    "),s.TgZ(20,"div",0),s._uU(21,"\n\n        "),s.YNc(22,y,21,1,"table",6),s.ALo(23,"async"),s._uU(24,"\n\n    "),s.qZA(),s._uU(25,"\n\n"),s.qZA(),s._uU(26,"\n\n"),s.YNc(27,k,7,0,"ng-template",null,7,s.W1O)),2&n){var i=s.MAs(28);s.xp6(15),s.Q6J("routerLink","novo"),s.xp6(7),s.Q6J("ngIf",s.lcZ(23,3,o.usuarios$))("ngIfElse",i)}},directives:[c.rH,e.O5,e.sg],pipes:[e.Ov],styles:[""]}),I)},{path:"novo",component:_},{path:"atualizar/:login",component:_}],S=function(){var o=function o(){n(this,o)};return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=s.oAB({type:o}),o.\u0275inj=s.cJS({imports:[[c.Bz.forChild(w)],c.Bz]}),o}(),x=((N=function o(){n(this,o)}).\u0275fac=function(n){return new(n||N)},N.\u0275mod=s.oAB({type:N}),N.\u0275inj=s.cJS({imports:[[e.ez,S,t.u5,t.UX]]}),N)}}])}();